<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkbox Grid</title>
    <!-- Include Tailwind CSS -->

    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
  </head>

  <body class="p-4 flex flex-col items-center gap-4 pt-8">
    <p class="text-base font-semibold text-gray-600">
      Pay once, own it forever
    </p>
    <div id="checkboxGrid" class="grid grid-cols-3 gap-4">
      <!-- Checkboxes will be generated here dynamically -->
    </div>

    <!-- Result Element -->
    <div class="mt-4">
      <p class="mt-6 flex items-baseline justify-center">
        <span class="text-5xl font-bold tracking-tight text-gray-900">$</span>
        <span
          id="result"
          class="text-5xl font-bold tracking-tight text-gray-900"
          >0</span
        >
        <span
          class="text-sm font-semibold leading-6 tracking-wide text-gray-600"
          >USD</span
        >
      </p>
    </div>

    <script>
      // Function to update result element
      function updateResult(price) {
        // Select the result element
        var resultElement = document.getElementById("result");
        // Update the result by adding the price
        resultElement.innerText = parseInt(resultElement.innerText) + price;
      }

      // Fetch data from apps.json
      fetch("apps.json")
        .then((response) => response.json())
        .then((data) => {
          const checkboxGrid = document.getElementById("checkboxGrid");
          // Loop through the data and generate checkboxes dynamically
          data.forEach((item) => {
            if (item.visible) {
              const label = document.createElement("label");

              if (item.enabled == true) {
                label.className =
                  "hover:bg-gray-300 bg-gray-100  gap-4 justify-between btn btn-primary p-4 rounded-lg shdow-md border flex items-center space-x-2";
              } else {
                label.className =
                  "bg-gray-100 opacity-50 gap-4 justify-between btn btn-primary p-4 rounded-lg shdow-md border flex items-center space-x-2";
              }

              const img = document.createElement("img");

              img.src = item.icon; // Path to your image
              img.alt = "Description of the image";
              img.id = item.name;
              img.className =
                " w-10 rounded-lg border-2 border-gray-200 p-1 bg-white  hover:opacity-100";

              const checkbox = document.createElement("input");

              checkbox.type = "checkbox";
              checkbox.className =
                " rounded-full form-checkbox h-5 w-5 checkbox opacity-70  text-gray-600";

              if (item.required) {
                checkbox.checked = true;
                checkbox.disabled = true;
                updateResult(parseInt(item.price));
              }
              checkbox.onchange = function () {
                if (item.enabled == true) {
                  if (this.checked) {
                    updateResult(parseInt(item.price));
                  } else {
                    updateResult(parseInt(-item.price));
                  }
                } else {
                  checkbox.checked = false;
                  checkbox.disabled = false;
                }
              };

              const span = document.createElement("span");
              span.innerText = item.title;
              label.appendChild(img);
              label.appendChild(span);
              label.appendChild(checkbox);
              checkboxGrid.appendChild(label);
            }
          });
        })
        .catch((error) => console.error("Error fetching data:", error));
    </script>
  </body>
</html>
